export const ayurvedaKnowledge = {
  vata: {
    "специи": {
      general: `Для Ваты рекомендуются согревающие специи:
      • Корица
      • Кардамон
      • Имбирь
      • Куркума
      • Шафран
      • Фенхель
      • Тмин
      
      Используйте их в теплых напитках и блюдах для баланса доши.`,
      "кардамон": "Для Ваты лучше всего подходит зеленый кардамон. Его можно добавлять в чай, кофе, выпечку и рисовые блюда. Рекомендуется использовать цельные стручки или свежемолотые семена для максимальной пользы.",
      "имбирь": "Свежий имбирь особенно полезен для Ваты. Можно добавлять в чай или использовать при приготовлении блюд. Помогает улучшить пищеварение и согреть организм.",
      "корица": "Корица - одна из лучших специй для Ваты. Используйте цейлонскую корицу в виде палочек или порошка. Хорошо сочетается с теплым молоком и сладкими блюдами."
    },
  },
  pitta: {
    "специи": {
      general: `Для Питты рекомендуются охлаждающие специи:
      • Кориандр
      • Фенхель
      • Кумин
      • Мята
      • Кардамон
      
      Избегайте острых специй, таких как черный перец и чили.`,
      "кардамон": "Для Питты подходит как зеленый, так и черный кардамон. Эта специя помогает охладить организм и улучшить пищеварение. Добавляйте в десерты и напитки для баланса вкуса.",
      "фенхель": "Фенхель - отличный выбор для Питты. Помогает охладить организм и улучшить пищеварение. Можно использовать семена или добавлять в чай.",
      "кориандр": "Кориандр идеально подходит для Питты. Используйте как свежую зелень, так и семена. Помогает охладить организм и улучшить пищеварение."
    },
  },
  kapha: {
    "специи": {
      general: `Для Капхи рекомендуются согревающие и стимулирующие специи:
      • Черный перец
      • Имбирь
      • Куркума
      • Корица
      • Кардамон
      • Горчичные семена
      • Асафетида
      
      Эти специи помогают ускорить метаболизм и уменьшить слизь в организме.`,
      "кардамон": "Для Капхи лучше всего подходит черный кардамон, который обладает более сильным согревающим эффектом. Он помогает улучшить пищеварение и метаболизм, уменьшает слизь в организме. Добавляйте в чай, кофе или используйте при приготовлении основных блюд.",
      "имбирь": "Для Капхи имбирь особенно полезен в свежем виде. Он стимулирует пищеварение, ускоряет метаболизм и помогает уменьшить слизь в организме. Можно добавлять в чай или использовать при готовке.",
      "перец": "Черный перец - одна из важнейших специй для Капхи. Используйте свежемолотый перец для максимальной пользы. Он помогает ускорить метаболизм и улучшить пищеварение."
    },
  }
};

export const findRelevantInfo = (question: string, doshaType: string, category: string): string => {
  const dosha = ayurvedaKnowledge[doshaType as keyof typeof ayurvedaKnowledge];
  if (!dosha) return "Извините, информация не найдена.";

  const questionLower = question.toLowerCase();
  
  // Проверяем конкретные вопросы о специях
  if (dosha["специи"]) {
    for (const [spice, info] of Object.entries(dosha["специи"])) {
      if (questionLower.includes(spice)) {
        return info;
      }
    }
  }

  // Если спрашивают о специях в целом
  if (questionLower.includes('специ')) {
    return dosha["специи"].general;
  }

  // Если это начальное сообщение или общий вопрос
  if (question === "initial" || questionLower.includes('что') || questionLower === 'да') {
    return `Для вашей ${doshaType} доши я могу рассказать о:
- Рекомендуемых специях
- Продуктах питания
- Режиме питания

О чем бы вы хотели узнать подробнее?`;
  }

  // Возвращаем информацию по категории, если есть прямой запрос
  if (dosha[category]) {
    return dosha[category];
  }

  return `Для вашей ${doshaType} доши я могу рассказать о:
- Рекомендуемых специях
- Продуктах питания
- Режиме питания

О чем бы вы хотели узнать подробнее?`;
};
